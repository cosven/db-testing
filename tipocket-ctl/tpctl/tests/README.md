# Simple test for tp-ctl
Simple test framework for tpctl

## Generate test case
Testcase can be generated by:
```bash
./generate.sh tmp tpctl prepare hello --build-image --run-time 2m --feature test-tpctl

# Read more in help
./generate.sh -h
```

Test data located in [tests/data](./data), contains:
- tpctl-build files
- cli output
- command of this test

## Test tpctl
Run this to run a testcase.
```bash
$ ./runtest.sh hello
diff -r /home/ofey/Code/PingCAP-Internship/tidb-testing/tipocket-ctl/tpctl/tests/data/hello/tpctl-build/tpctl-dockerfile /home/ofey/Code/PingCAP-Internship/tidb-testing/tipocket-ctl/tpctl/tests/data/tmp/tpctl-build/tpctl-dockerfile
6c6
< COPY config /
---
> COPY config /config
```

When running a test case, we do:
- Run data/{test}/command.sh, collect its all info into ./last-run-test:
    - tpctl-build files
    - cli output
    - command of this test
- then do a diff between data/{test} and ./last-run-test.
